!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("page",[],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.page=e()}}(function(){return function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var u=r[a]={exports:{}};t[a][0].call(u.exports,function(e){var r=t[a][1][e];return i(r?r:e)},u,u.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){(function(r){"use strict";function n(e,t){if("function"==typeof e)return n("*",e);if("function"==typeof t)for(var r=new s(e),i=1;i<arguments.length;++i)n.callbacks.push(r.middleware(arguments[i]));else"string"==typeof e?n["string"==typeof t?"redirect":"show"](e,t):n.start(e)}function i(e){if(!e.handled){var t;t=w?m+y.hash.replace("#!",""):y.pathname+y.search,t!==e.canonicalPath&&(n.stop(),e.handled=!1,y.href=e.canonicalPath)}}function o(e){return"string"!=typeof e?e:v?decodeURIComponent(e.replace(/\+/g," ")):e}function a(e,t){"/"===e[0]&&0!==e.indexOf(m)&&(e=m+(w?"#!":"")+e);var r=e.indexOf("?");if(this.canonicalPath=e,this.path=e.replace(m,"")||"/",w&&(this.path=this.path.replace("#!","")||"/"),this.title=document.title,this.state=t||{},this.state.path=e,this.querystring=~r?o(e.slice(r+1)):"",this.pathname=o(~r?e.slice(0,r):e),this.params={},this.hash="",!w){if(!~this.path.indexOf("#"))return;var n=this.path.split("#");this.path=n[0],this.hash=o(n[1])||"",this.querystring=this.querystring.split("#")[0]}}function s(e,t){t=t||{},this.path="*"===e?"(.*)":e,this.method="GET",this.regexp=p(this.path,this.keys=[],t.sensitive,t.strict)}function c(e){if(1===f(e)&&!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){for(var t=e.target;t&&"A"!==t.nodeName;)t=t.parentNode;if(t&&"A"===t.nodeName&&!t.hasAttribute("download")&&"external"!==t.getAttribute("rel")){var i=t.getAttribute("href");if((w||t.pathname!==y.pathname||!t.hash&&"#"!==i)&&!(i&&i.indexOf("mailto:")>-1)&&!t.target&&u(t.href)){var o=t.pathname+t.search+(t.hash||"");"undefined"!=typeof r&&o.match(/^\/[a-zA-Z]:\//)&&(o=o.replace(/^\/[a-zA-Z]:\//,"/"));var a=o;0===o.indexOf(m)&&(o=o.substr(m.length)),w&&(o=o.replace("#!","")),m&&a===o||(e.preventDefault(),n.show(a))}}}}function f(e){return e=e||window.event,null===e.which?e.button:e.which}function u(e){var t=y.protocol+"//"+y.hostname;return y.port&&(t+=":"+y.port),e&&0===e.indexOf(t)}var p=e("path-to-regexp");t.exports=n;var l,d,h="undefined"!=typeof document&&document.ontouchstart?"touchstart":"click",y="undefined"!=typeof window&&(window.history.location||window.location),g=!0,v=!0,m="",w=!1;n.callbacks=[],n.exits=[],n.current="",n.len=0,n.base=function(e){return 0===arguments.length?m:void(m=e)},n.start=function(e){if(e=e||{},!l&&(l=!0,!1===e.dispatch&&(g=!1),!1===e.decodeURLComponents&&(v=!1),!1!==e.popstate&&window.addEventListener("popstate",b,!1),!1!==e.click&&document.addEventListener(h,c,!1),!0===e.hashbang&&(w=!0),g)){var t=w&&~y.hash.indexOf("#!")?y.hash.substr(2)+y.search:y.pathname+y.search+y.hash;n.replace(t,null,!0,g)}},n.stop=function(){l&&(n.current="",n.len=0,l=!1,document.removeEventListener(h,c,!1),window.removeEventListener("popstate",b,!1))},n.show=function(e,t,r,i){var o=new a(e,t);return n.current=o.path,!1!==r&&n.dispatch(o),!1!==o.handled&&!1!==i&&o.pushState(),o},n.back=function(e,t){n.len>0?(history.back(),n.len--):e?setTimeout(function(){n.show(e,t)}):setTimeout(function(){n.show(m,t)})},n.redirect=function(e,t){"string"==typeof e&&"string"==typeof t&&n(e,function(e){setTimeout(function(){n.replace(t)},0)}),"string"==typeof e&&"undefined"==typeof t&&setTimeout(function(){n.replace(e)},0)},n.replace=function(e,t,r,i){var o=new a(e,t);return n.current=o.path,o.init=r,o.save(),!1!==i&&n.dispatch(o),o},n.dispatch=function(e){function t(){var e=n.exits[s++];return e?void e(o,t):r()}function r(){var t=n.callbacks[a++];return e.path!==n.current?void(e.handled=!1):t?void t(e,r):i(e)}var o=d,a=0,s=0;d=e,o?t():r()},n.exit=function(e,t){if("function"==typeof e)return n.exit("*",e);for(var r=new s(e),i=1;i<arguments.length;++i)n.exits.push(r.middleware(arguments[i]))},n.Context=a,a.prototype.pushState=function(){n.len++,history.pushState(this.state,this.title,w&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},a.prototype.save=function(){history.replaceState(this.state,this.title,w&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},n.Route=s,s.prototype.middleware=function(e){var t=this;return function(r,n){return t.match(r.path,r.params)?e(r,n):void n()}},s.prototype.match=function(e,t){var r=this.keys,n=e.indexOf("?"),i=~n?e.slice(0,n):e,a=this.regexp.exec(decodeURIComponent(i));if(!a)return!1;for(var s=1,c=a.length;c>s;++s){var f=r[s-1],u=o(a[s]);void 0===u&&hasOwnProperty.call(t,f.name)||(t[f.name]=u)}return!0};var b=function(){var e=!1;if("undefined"!=typeof window)return"complete"===document.readyState?e=!0:window.addEventListener("load",function(){setTimeout(function(){e=!0},0)}),function(t){if(e)if(t.state){var r=t.state.path;n.replace(r,t.state)}else n.show(y.pathname+y.hash,void 0,void 0,!1)}}();n.sameOrigin=u}).call(this,e("_process"))},{_process:2,"path-to-regexp":3}],2:[function(e,t,r){function n(){}var i=t.exports={};i.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.MutationObserver,r="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};var n=[];if(t){var i=document.createElement("div"),o=new MutationObserver(function(){var e=n.slice();n.length=0,e.forEach(function(e){e()})});return o.observe(i,{attributes:!0}),function(e){n.length||i.setAttribute("yes","no"),n.push(e)}}return r?(window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=n,i.addListener=n,i.once=n,i.off=n,i.removeListener=n,i.removeAllListeners=n,i.emit=n,i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],3:[function(e,t,r){function n(e){for(var t,r=[],n=0,i=0,o="";null!=(t=g.exec(e));){var a=t[0],c=t[1],f=t.index;if(o+=e.slice(i,f),i=f+a.length,c)o+=c[1];else{o&&(r.push(o),o="");var u=t[2],p=t[3],l=t[4],d=t[5],h=t[6],y=t[7],v="+"===h||"*"===h,m="?"===h||"*"===h,w=u||"/",b=l||d||(y?".*":"[^"+w+"]+?");r.push({name:p||n++,prefix:u||"",delimiter:w,optional:m,repeat:v,pattern:s(b)})}}return i<e.length&&(o+=e.substr(i)),o&&r.push(o),r}function i(e){return o(n(e))}function o(e){for(var t=new Array(e.length),r=0;r<e.length;r++)"object"==typeof e[r]&&(t[r]=new RegExp("^"+e[r].pattern+"$"));return function(r){for(var n="",i=r||{},o=0;o<e.length;o++){var a=e[o];if("string"!=typeof a){var s,c=i[a.name];if(null==c){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to be defined')}if(y(c)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received "'+c+'"');if(0===c.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var f=0;f<c.length;f++){if(s=encodeURIComponent(c[f]),!t[o].test(s))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received "'+s+'"');n+=(0===f?a.prefix:a.delimiter)+s}}else{if(s=encodeURIComponent(c),!t[o].test(s))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+s+'"');n+=a.prefix+s}}else n+=a}return n}}function a(e){return e.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function s(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function c(e,t){return e.keys=t,e}function f(e){return e.sensitive?"":"i"}function u(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return c(e,t)}function p(e,t,r){for(var n=[],i=0;i<e.length;i++)n.push(h(e[i],t,r).source);var o=new RegExp("(?:"+n.join("|")+")",f(r));return c(o,t)}function l(e,t,r){for(var i=n(e),o=d(i,r),a=0;a<i.length;a++)"string"!=typeof i[a]&&t.push(i[a]);return c(o,t)}function d(e,t){t=t||{};for(var r=t.strict,n=t.end!==!1,i="",o=e[e.length-1],s="string"==typeof o&&/\/$/.test(o),c=0;c<e.length;c++){var u=e[c];if("string"==typeof u)i+=a(u);else{var p=a(u.prefix),l=u.pattern;u.repeat&&(l+="(?:"+p+l+")*"),l=u.optional?p?"(?:"+p+"("+l+"))?":"("+l+")?":p+"("+l+")",i+=l}}return r||(i=(s?i.slice(0,-2):i)+"(?:\\/(?=$))?"),i+=n?"$":r&&s?"":"(?=\\/|$)",new RegExp("^"+i,f(t))}function h(e,t,r){return t=t||[],y(t)?r||(r={}):(r=t,t=[]),e instanceof RegExp?u(e,t,r):y(e)?p(e,t,r):l(e,t,r)}var y=e("isarray");t.exports=h,t.exports.parse=n,t.exports.compile=i,t.exports.tokensToFunction=o,t.exports.tokensToRegExp=d;var g=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},{isarray:4}],4:[function(e,t,r){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}]},{},[1])(1)}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("page/query",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Qs=e()}}(function(){return function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var u=r[a]={exports:{}};t[a][0].call(u.exports,function(e){var r=t[a][1][e];return i(r?r:e)},u,u.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){"use strict";var n=e("./stringify"),i=e("./parse");t.exports={stringify:n,parse:i}},{"./parse":2,"./stringify":3}],2:[function(e,t,r){"use strict";var n=e("./utils"),i={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3,strictNullHandling:!1,plainObjects:!1,allowPrototypes:!1,allowDots:!1};i.parseValues=function(e,t){for(var r={},i=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),o=0;o<i.length;++o){var a=i[o],s=-1===a.indexOf("]=")?a.indexOf("="):a.indexOf("]=")+1;if(-1===s)r[n.decode(a)]="",t.strictNullHandling&&(r[n.decode(a)]=null);else{var c=n.decode(a.slice(0,s)),f=n.decode(a.slice(s+1));Object.prototype.hasOwnProperty.call(r,c)?r[c]=[].concat(r[c]).concat(f):r[c]=f}}return r},i.parseObject=function(e,t,r){if(!e.length)return t;var n,o=e.shift();if("[]"===o)n=[],n=n.concat(i.parseObject(e,t,r));else{n=r.plainObjects?Object.create(null):{};var a="["===o[0]&&"]"===o[o.length-1]?o.slice(1,o.length-1):o,s=parseInt(a,10);!isNaN(s)&&o!==a&&String(s)===a&&s>=0&&r.parseArrays&&s<=r.arrayLimit?(n=[],n[s]=i.parseObject(e,t,r)):n[a]=i.parseObject(e,t,r)}return n},i.parseKeys=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\.([^\.\[]+)/g,"[$1]"):e,o=/^([^\[\]]*)/,a=/(\[[^\[\]]*\])/g,s=o.exec(n),c=[];if(s[1]){if(!r.plainObjects&&Object.prototype.hasOwnProperty(s[1])&&!r.allowPrototypes)return;c.push(s[1])}for(var f=0;null!==(s=a.exec(n))&&f<r.depth;)f+=1,(r.plainObjects||!Object.prototype.hasOwnProperty(s[1].replace(/\[|\]/g,""))||r.allowPrototypes)&&c.push(s[1]);return s&&c.push("["+n.slice(s.index)+"]"),i.parseObject(c,t,r)}},t.exports=function(e,t){var r=t||{};if(r.delimiter="string"==typeof r.delimiter||n.isRegExp(r.delimiter)?r.delimiter:i.delimiter,r.depth="number"==typeof r.depth?r.depth:i.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:i.arrayLimit,r.parseArrays=r.parseArrays!==!1,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:i.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:i.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:i.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:i.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:i.strictNullHandling,""===e||null===e||"undefined"==typeof e)return r.plainObjects?Object.create(null):{};for(var o="string"==typeof e?i.parseValues(e,r):e,a=r.plainObjects?Object.create(null):{},s=Object.keys(o),c=0;c<s.length;++c){var f=s[c],u=i.parseKeys(f,o[f],r);a=n.merge(a,u,r)}return n.compact(a)}},{"./utils":4}],3:[function(e,t,r){"use strict";var n=e("./utils"),i={delimiter:"&",arrayPrefixGenerators:{brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},strictNullHandling:!1,skipNulls:!1,encode:!0};i.stringify=function(e,t,r,o,a,s,c,f,u){var p=e;if("function"==typeof c)p=c(t,p);else if(n.isBuffer(p))p=String(p);else if(p instanceof Date)p=p.toISOString();else if(null===p){if(o)return s?n.encode(t):t;p=""}if("string"==typeof p||"number"==typeof p||"boolean"==typeof p)return s?[n.encode(t)+"="+n.encode(p)]:[t+"="+p];var l=[];if("undefined"==typeof p)return l;var d;if(Array.isArray(c))d=c;else{var h=Object.keys(p);d=f?h.sort(f):h}for(var y=0;y<d.length;++y){var g=d[y];a&&null===p[g]||(l=Array.isArray(p)?l.concat(i.stringify(p[g],r(t,g),r,o,a,s,c)):l.concat(i.stringify(p[g],t+(u?"."+g:"["+g+"]"),r,o,a,s,c)))}return l},t.exports=function(e,t){var r,n,o=e,a=t||{},s="undefined"==typeof a.delimiter?i.delimiter:a.delimiter,c="boolean"==typeof a.strictNullHandling?a.strictNullHandling:i.strictNullHandling,f="boolean"==typeof a.skipNulls?a.skipNulls:i.skipNulls,u="boolean"==typeof a.encode?a.encode:i.encode,p="function"==typeof a.sort?a.sort:null,l="undefined"==typeof a.allowDots?!1:a.allowDots;"function"==typeof a.filter?(n=a.filter,o=n("",o)):Array.isArray(a.filter)&&(r=n=a.filter);var d=[];if("object"!=typeof o||null===o)return"";var h;h=a.arrayFormat in i.arrayPrefixGenerators?a.arrayFormat:"indices"in a?a.indices?"indices":"repeat":"indices";var y=i.arrayPrefixGenerators[h];r||(r=Object.keys(o)),p&&r.sort(p);for(var g=0;g<r.length;++g){var v=r[g];f&&null===o[v]||(d=d.concat(i.stringify(o[v],v,y,c,f,u,n,p,l)))}return d.join(s)}},{"./utils":4}],4:[function(e,t,r){"use strict";var n=function(){for(var e=new Array(256),t=0;256>t;++t)e[t]="%"+((16>t?"0":"")+t.toString(16)).toUpperCase();return e}();r.arrayToObject=function(e,t){for(var r=t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)"undefined"!=typeof e[n]&&(r[n]=e[n]);return r},r.merge=function(e,t,n){if(!t)return e;if("object"!=typeof t){if(Array.isArray(e))e.push(t);else{if("object"!=typeof e)return[e,t];e[t]=!0}return e}if("object"!=typeof e)return[e].concat(t);var i=e;return Array.isArray(e)&&!Array.isArray(t)&&(i=r.arrayToObject(e,n)),Object.keys(t).reduce(function(e,i){var o=t[i];return Object.prototype.hasOwnProperty.call(e,i)?e[i]=r.merge(e[i],o,n):e[i]=o,e},i)},r.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},r.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),r="",i=0;i<t.length;++i){var o=t.charCodeAt(i);45===o||46===o||95===o||126===o||o>=48&&57>=o||o>=65&&90>=o||o>=97&&122>=o?r+=t.charAt(i):128>o?r+=n[o]:2048>o?r+=n[192|o>>6]+n[128|63&o]:55296>o||o>=57344?r+=n[224|o>>12]+n[128|o>>6&63]+n[128|63&o]:(i+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(i)),r+=n[240|o>>18]+n[128|o>>12&63]+n[128|o>>6&63]+n[128|63&o])}return r},r.compact=function(e,t){if("object"!=typeof e||null===e)return e;var n=t||[],i=n.indexOf(e);if(-1!==i)return n[i];if(n.push(e),Array.isArray(e)){for(var o=[],a=0;a<e.length;++a)"undefined"!=typeof e[a]&&o.push(e[a]);return o}for(var s=Object.keys(e),c=0;c<s.length;++c){var f=s[c];e[f]=r.compact(e[f],n)}return e},r.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},r.isBuffer=function(e){return null===e||"undefined"==typeof e?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},{}]},{},[1])(1)}),function(e){if("function"==typeof define&&define.amd){if("undefined"!=typeof requirejs){var t="[history"+(new Date).getTime()+"]",r=requirejs.onError;e.toString=function(){return t},requirejs.onError=function(e){-1===e.message.indexOf(t)&&r.call(requirejs,e)}}define("lib/HTML5-History-API/history.min",[],e)}return"object"!=typeof exports||"undefined"==typeof module?e():void(module.exports=e())}(function(){function e(e,t){var r=m.history!==A;r&&(m.history=A),e.apply(A,t),r&&(m.history=L)}function t(){}function r(e,t,n){if(e==g||""===e||t)e=t?e:j.href,(!N||n)&&(e=e.replace(/^[^#]*/,"")||"#",e=j.protocol.replace(/:.*$|$/,":")+"//"+j.host+H.basepath+e.replace(RegExp("^#[/]?(?:"+H.type+")?"),""));else{var t=r(),i=b.getElementsByTagName("base")[0];!n&&i&&i.getAttribute("href")&&(i.href=i.href,t=r(i.href,g,y)),n=t.d,i=t.h,e=""+e,e=/^(?:\w+\:)?\/\//.test(e)?0===e.indexOf("/")?i+e:e:i+"//"+t.g+(0===e.indexOf("/")?e:0===e.indexOf("?")?n+e:0===e.indexOf("#")?n+t.e+e:n.replace(/[^\/]+$/g,"")+e)}M.href=e;var e=/(?:([a-zA-Z0-9\-]+\:))?(?:\/\/(?:[^@]*@)?([^\/:\?#]+)(?::([0-9]+))?)?([^\?#]*)(?:(\?[^#]+)|\?)?(?:(#.*))?/.exec(M.href),t=e[2]+(e[3]?":"+e[3]:""),n=e[4]||"/",i=e[5]||"",o="#"===e[6]?"":e[6]||"",a=n+i+o,s=n.replace(RegExp("^"+H.basepath,"i"),H.type)+i;return{b:e[1]+"//"+t+a,h:e[1],g:t,i:e[2],k:e[3]||"",d:n,e:i,a:o,c:a,j:s,f:s+o}}function n(){var e;try{e=m.sessionStorage,e.setItem(B+"t","1"),e.removeItem(B+"t")}catch(t){e={getItem:function(e){return e=b.cookie.split(e+"="),1<e.length&&e.pop().split(";").shift()||"null"},setItem:function(e){var t={};(t[j.href]=L.state)&&(b.cookie=e+"="+E.stringify(t))}}}try{Z=E.parse(e.getItem(B))||{}}catch(r){Z={}}q(R+"unload",function(){e.setItem(B,E.stringify(Z))},v)}function i(e,r,n,i){var o=0;n||(n={set:t},o=1);var a=!n.set,s=!n.get,c={configurable:y,set:function(){a=1},get:function(){s=1}};try{_(e,r,c),e[r]=e[r],_(e,r,n)}catch(f){}if(!(a&&s||(e.__defineGetter__&&(e.__defineGetter__(r,c.get),e.__defineSetter__(r,c.set),e[r]=e[r],n.get&&e.__defineGetter__(r,n.get),n.set&&e.__defineSetter__(r,n.set)),a&&s))){if(o)return v;if(e===m){try{var u=e[r];e[r]=g}catch(p){}if("execScript"in m)m.execScript("Public "+r,"VBScript"),m.execScript("var "+r+";","JavaScript");else try{_(e,r,{value:t})}catch(l){"onpopstate"===r&&(q("popstate",n=function(){C("popstate",n,v);var t=e.onpopstate;e.onpopstate=g,setTimeout(function(){e.onpopstate=t},1)},v),K=0)}e[r]=u}else try{try{var d=O.create(e);_(O.getPrototypeOf(d)===e?d:e,r,n);for(var h in e)"function"==typeof e[h]&&(d[h]=e[h].bind(e));try{i.call(d,d,e)}catch(w){}e=d}catch(b){_(e.constructor.prototype,r,n)}}catch(x){return v}}return e}function o(e,t,r){return r=r||{},e=e===Y?j:e,r.set=r.set||function(r){e[t]=r},r.get=r.get||function(){return e[t]},r}function a(e,t,r){e in J?J[e].push(t):3<arguments.length?q(e,t,r,arguments[3]):q(e,t,r)}function s(e,t,r){var n=J[e];if(n){for(e=n.length;e--;)if(n[e]===t){n.splice(e,1);break}}else C(e,t,r)}function c(e,r){var n=(""+("string"==typeof e?e:e.type)).replace(/^on/,""),o=J[n];if(o){if(r="string"==typeof e?r:e,r.target==g)for(var a=["target","currentTarget","srcElement","type"];e=a.pop();)r=i(r,e,{get:"type"===e?function(){return n}:function(){return m}});K&&(("popstate"===n?m.onpopstate:m.onhashchange)||t).call(m,r);for(var a=0,s=o.length;s>a;a++)o[a].call(m,r);return y}return U(e,r)}function f(){var e=b.createEvent?b.createEvent("Event"):b.createEventObject();e.initEvent?e.initEvent("popstate",v,v):e.type="popstate",e.state=L.state,c(e)}function u(e,t,n,i){N?G=j.href:(0===z&&(z=2),t=r(t,2===z&&-1!==(""+t).indexOf("#")),t.c!==r().c&&(G=i,n?j.replace("#"+t.f):j.hash=t.f)),!S&&e&&(Z[j.href]=e),V=v}function p(e){var t=G;if(G=j.href,t){F!==j.href&&f();var e=e||m.event,t=r(t,y),n=r();e.oldURL||(e.oldURL=t.b,e.newURL=n.b),t.a!==n.a&&c(e)}}function l(e){setTimeout(function(){q("popstate",function(e){F=j.href,S||(e=i(e,"state",{get:function(){return L.state}})),c(e)},v)},0),!N&&e!==y&&"location"in L&&(h(T.hash),V&&(V=v,f()))}function d(e){var t,e=e||m.event;e:{for(t=e.target||e.srcElement;t;){if("A"===t.nodeName)break e;t=t.parentNode}t=void 0}var n="defaultPrevented"in e?e.defaultPrevented:e.returnValue===v;t&&"A"===t.nodeName&&!n&&(n=r(),t=r(t.getAttribute("href",2)),n.b.split("#").shift()===t.b.split("#").shift()&&t.a&&(n.a!==t.a&&(T.hash=t.a),h(t.a),e.preventDefault?e.preventDefault():e.returnValue=v))}function h(e){var t=b.getElementById(e=(e||"").replace(/^#/,""));t&&t.id===e&&"A"===t.nodeName&&(e=t.getBoundingClientRect(),m.scrollTo(x.scrollLeft||0,e.top+(x.scrollTop||0)-(x.clientTop||0)))}var y=!0,g=null,v=!1,m=("object"==typeof window?window:this)||{};if(!m.history||"emulate"in m.history)return m.history;var w,b=m.document,x=b.documentElement,O=m.Object,E=m.JSON,j=m.location,A=m.history,L=A,k=A.pushState,P=A.replaceState,N=function(){var e=m.navigator.userAgent;return-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone")?!!k:v}(),S="state"in A,_=O.defineProperty,T=i({},"t")?{}:b.createElement("a"),R="",$=m.addEventListener?"addEventListener":(R="on")&&"attachEvent",I=m.removeEventListener?"removeEventListener":"detachEvent",D=m.dispatchEvent?"dispatchEvent":"fireEvent",q=m[$],C=m[I],U=m[D],H={basepath:"/",redirect:0,type:"/",init:0},B="__historyAPI__",M=b.createElement("a"),G=j.href,F="",K=1,V=v,z=0,Z={},J={},Q=b.title,W={onhashchange:g,onpopstate:g},X={setup:function(e,t,r){H.basepath=(""+(e==g?H.basepath:e)).replace(/(?:^|\/)[^\/]*$/,"/"),H.type=t==g?H.type:t,H.redirect=r==g?H.redirect:!!r},redirect:function(e,t){if(L.setup(t,e),t=H.basepath,m.top==m.self){var n=r(g,v,y).c,i=j.pathname+j.search;N?(i=i.replace(/([^\/])$/,"$1/"),n!=t&&RegExp("^"+t+"$","i").test(i)&&j.replace(n)):i!=t&&(i=i.replace(/([^\/])\?/,"$1/?"),RegExp("^"+t,"i").test(i)&&j.replace(t+"#"+i.replace(RegExp("^"+t,"i"),H.type)+j.hash))}},pushState:function(t,r,n){var i=b.title;Q!=g&&(b.title=Q),k&&e(k,arguments),u(t,n),b.title=i,Q=r},replaceState:function(t,r,n){var i=b.title;Q!=g&&(b.title=Q),delete Z[j.href],P&&e(P,arguments),u(t,n,y),b.title=i,Q=r},location:{set:function(e){0===z&&(z=1),m.location=e},get:function(){return 0===z&&(z=1),T}},state:{get:function(){return"object"==typeof Z[j.href]?E.parse(E.stringify(Z[j.href])):"undefined"!=typeof Z[j.href]?Z[j.href]:g}}},Y={assign:function(e){N||0!==(""+e).indexOf("#")?j.assign(e):u(g,e)},reload:function(e){j.reload(e)},replace:function(e){N||0!==(""+e).indexOf("#")?j.replace(e):u(g,e,y)},toString:function(){return this.href},origin:{get:function(){return void 0!==w?w:j.origin?j.origin:j.protocol+"//"+j.hostname+(j.port?":"+j.port:"")},set:function(e){w=e}},href:N?g:{get:function(){return r().b}},protocol:g,host:g,hostname:g,port:g,pathname:N?g:{get:function(){return r().d}},search:N?g:{get:function(){return r().e}},hash:N?g:{set:function(e){u(g,(""+e).replace(/^(#|)/,"#"),v,G)},get:function(){return r().a}}};return function(){var e=b.getElementsByTagName("script"),e=(e[e.length-1]||{}).src||"";(-1!==e.indexOf("?")?e.split("?").pop():"").replace(/(\w+)(?:=([^&]*))?/g,function(e,t,r){H[t]=(r||"").replace(/^(0|false)$/,"")}),q(R+"hashchange",p,v);var t=[Y,T,W,m,X,L];S&&delete X.state;for(var a=0;a<t.length;a+=2)for(var s in t[a])if(t[a].hasOwnProperty(s))if("object"!=typeof t[a][s])t[a+1][s]=t[a][s];else{if(e=o(t[a],s,t[a][s]),!i(t[a+1],s,e,function(e,r){r===L&&(m.history=L=t[a+1]=e)}))return C(R+"hashchange",p,v),v;t[a+1]===m&&(J[s]=J[s.substr(2)]=[])}return L.setup(),H.redirect&&L.redirect(),H.init&&(z=1),!S&&E&&n(),N||b[$](R+"click",d,v),"complete"===b.readyState?l(y):(!N&&r().c!==H.basepath&&(V=y),q(R+"load",l,v)),y}()?(L.emulate=!N,m[$]=a,m[I]=s,m[D]=c,L):void 0});
//# sourceMappingURL=magpie.html5.router.vendor.min.js.map